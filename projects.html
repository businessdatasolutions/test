<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0"
    />
    <title>M3DM Data Mining Projects</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootswatch@5.3.2/dist/united/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="container mt-5">
      <h1 class="mb-4">M3DM Data Mining Projects</h1>
      <p>
        We have curated an extensive collection of videos tailored to enhance
        your understanding of data science. This selection spans various key
        areas such as machine learning, artificial intelligence, data analysis,
        visualization, application development, cutting-edge technologies,
        specialized applications, and quality assurance. Each video is designed
        to offer a comprehensive insight into the multifaceted world of data
        science.
      </p>
      <p>
        For your assignment, you are encouraged to select at least one video as
        the cornerstone of your exploration journey. This journey will empower
        you to delve deep into the realm of data science. By its conclusion, you
        will have developed a minimum viable data product, showcasing your
        newfound skills and understanding.
      </p>
      <hr class="bg-white border-2 border-top border-white" />
      <div
        id="projects-container"
        class="row"
      >
        <!-- Projects will be loaded here -->
      </div>
      <div class="d-flex justify-content-between my-4">
        <button
          id="prevButton"
          class="btn btn-primary"
        >
          Previous
        </button>
        <button
          id="nextButton"
          class="btn btn-primary"
        >
          Next
        </button>
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        let currentPage = 0;
        const projectsPerPage = 15;

        function loadProjects(projects, page) {
          const projectsContainer =
            document.getElementById("projects-container");
          projectsContainer.innerHTML = ""; // Clear current projects

          const start = page * projectsPerPage;
          const end = start + projectsPerPage;
          const paginatedProjects = projects.slice(start, end);

          paginatedProjects.forEach((project) => {
            const videoId = extractYoutubeId(project.videoUrl);
            const card = document.createElement("div");
            card.className = "col-md-4 mb-4";
            card.innerHTML = `
                            <div class="card d-flex flex-column h-100">
                                <div class="card-body">
                                    <h5 class="card-title">${project.title}</h5>
                                    <p class="card-text">${project.description}</p>
                                    <div class="mt-auto">
                                        <iframe width="100%" height="315" src="https://www.youtube.com/embed/${videoId}" frameborder="0" allowfullscreen></iframe>
                                    </div>
                                </div>
                            </div>
                        `;
            projectsContainer.appendChild(card);
          });
        }

        function updateButtons(page, totalProjects) {
          const totalPages = Math.ceil(totalProjects / projectsPerPage);
          document.getElementById("prevButton").disabled = page === 0;
          document.getElementById("nextButton").disabled =
            page === totalPages - 1;
        }

        function scrollToProjects() {
          document.getElementById("projects-container").scrollIntoView({
            behavior: "smooth", // Optional: for smooth scrolling
            block: "start",
          });
        }

        fetch("projects.json")
          .then((response) => response.json())
          .then((projects) => {
            loadProjects(projects, currentPage);
            updateButtons(currentPage, projects.length);

            document
              .getElementById("prevButton")
              .addEventListener("click", () => {
                if (currentPage > 0) {
                  currentPage -= 1;
                  loadProjects(projects, currentPage);
                  updateButtons(currentPage, projects.length);
                  scrollToProjects(); // Call to scroll function
                }
              });

            document
              .getElementById("nextButton")
              .addEventListener("click", () => {
                if (
                  currentPage <
                  Math.ceil(projects.length / projectsPerPage) - 1
                ) {
                  currentPage += 1;
                  loadProjects(projects, currentPage);
                  updateButtons(currentPage, projects.length);
                  scrollToProjects(); // Call to scroll function
                }
              });
          })
          .catch((error) => {
            console.error("Error loading projects:", error);
          });
      });

      function extractYoutubeId(url) {
        const regExp =
          /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=|\\?v=)([^#\\&\\?]*).*/;
        const match = url.match(regExp);

        if (match && match[2].length == 11) {
          return match[2];
        } else {
          return "InvalidID";
        }
      }
    </script>
  </body>
</html>
